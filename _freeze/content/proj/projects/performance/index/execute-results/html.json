{
  "hash": "7ab00af94e098f7ee8d8d320ffbfebae",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Measuring Health Performance\"\nexcerpt: \"Machine learning models\"\ndate: 2023-03-14\ndraft: false\nimages:\nseries:\ncategories: \nlayout: single\npage-layout: full\n---\n\n## Overview\n\n::: columns\n::: {.column width=\"80%\"}\nThese days measuring performance is very appropriate for many different topics. Thinking about health and the fast changing environments, including climate changes, require a ready tool for identifying possible future outcomes. On health, interesting simple metrics are used to classify the state of health of a population, so to be comparable with other near and far.\n\nHere is a spec of my latest project where I am collecting all that I learned since the start of the Covid19 pandemic on a summary of the techniques used for measuring the health status of a population when in conjunction with an extreme event. Many tools are available and ready to use for the most exceptional purpose someone might had in mind, and I had difficulties choosing one on top of the other. But, why choosing if you can combine them?\n:::\n\n::: {.column width=\"20%\"}\n![](featured.png)\n:::\n:::\n\nThere are three metrics that are used for the purpose of classification in the public health, the DALYs, YLLs, and the YLDs. Respectively are the **Disability Adjusted Life Years**, **Years of Life Lost**, and **Years Lived with Disabilities**.\n\nBefore going into the calculation detail, the definition of **good health and well being** is required.\n\nThe [WHO](https://bit.ly/3mU4tbJ) constitution states:\n\n> \"Health is a state of complete physical, mental and social well-being and not merely the absence of disease or infirmity.\"\n\nAn important implication of this definition is that mental health is more than just the absence of mental disorders or disabilities.\n\nLet's load the {hmsidwR} package, still at its very early stages; a development version can be installed from GitHub:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndevtools::install_github(\"Fgazzelloni/hmsidwR\")\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(hmsidwR)\n```\n:::\n\n\nIt contains some interesting datasets:\n\nThe Global life tables: **Glifetables**. A dataset provided by the **World Health Organization (WHO)**. [Global Health Observatory data repository](https://apps.who.int/gho/data/)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n?hmsidwR\n```\n:::\n\n\nAnd the Germany lung cancer: **Germany_lungc**. A dataset provided by the **Institute for Health Metrics and Evaluation (IHME)**. [GBD Results](https://bit.ly/3YMfol8)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhmsidwR::germany_lungc %>% head\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 8\n  age   sex    prevalence prev_upper prev_lower    dx dx_uppe dx_lower\n  <chr> <chr>       <dbl>      <dbl>      <dbl> <dbl>   <dbl>    <dbl>\n1 10-14 male         0.08       0.13       0.05 0.322   0.461    0.217\n2 10-14 female       0.18       0.32       0.09 0.457   0.761    0.248\n3 10-14 both         0.13       0.22       0.07 0.779   1.21     0.468\n4 15-19 male         0.48       0.77       0.29 1.27    1.75     0.916\n5 15-19 female       0.9        1.52       0.5  1.56    2.46     0.941\n6 15-19 both         0.68       1.02       0.44 2.83    3.88     2.07 \n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngermany_lungc %>%\n  ggplot(aes(age, dx, fill = sex)) +\n  geom_col() +\n  facet_wrap( ~ sex) +\n  scale_x_discrete(breaks = c(\"35-39\", \"65-69\", \"85+\")) +\n  ggthemes::scale_fill_fivethirtyeight() +\n  ggthemes::theme_fivethirtyeight() +\n  labs(title = \"Germany lung cancer -2019\",\n       caption = \"Vis: fgazzelloni|DataSource: IHME\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nThe combination of this to piece of information, the life expectancy and the expected value of lung cancer cases, in proportion of the Germany population, are combined by age class and divided by sex to obtain the YLLs, the numbers of years of life lost.\n\nIn this case for Germany data is available from the age class 10-14, if we would like to improve this analysis it required some missing value imputation, through data feature engineering.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyll <- germany_lungc %>%\n  full_join(\n    gho_lifetables %>%\n      filter(year == 2019,\n             indicator == \"ex\") %>%\n      rename(life_expectancy = value),\n    by = c(\"age\", \"sex\")\n  ) %>%\n  group_by(age, sex) %>%\n  reframe(yll = dx * life_expectancy) %>%\n  filter(!is.na(yll))\n\nyll %>%\n  head()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 3\n  age   sex      yll\n  <chr> <chr>  <dbl>\n1 10-14 both    51.7\n2 10-14 female  31.5\n3 10-14 male    20.6\n4 15-19 both   174. \n5 15-19 female  99.7\n6 15-19 male    75.4\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyll %>%\n  ggplot(aes(age, yll, fill = sex)) +\n  geom_col() +\n  facet_wrap( ~ sex) +\n  scale_x_discrete(breaks = c(\"35-39\", \"65-69\", \"85+\")) +\n  ggthemes::scale_fill_fivethirtyeight() +\n  ggthemes::theme_fivethirtyeight() +\n  labs(title = \"YLL - Germany lung cancer -2019\",\n       caption = \"Vis: fgazzelloni|DataSource: IHME & WHO\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nTo build the YLDs, the numbers of years lived with a disability due to a disease or injury, we need more data: the **prevalence**, and the **disability weights**.\n\nsource:\n\n-   [disability weights](https://ghdx.healthdata.org/record/ihme-data/gbd-2019-disability-weights)\n\nThen, the sum of the YLL and the YLD provides the overall value of the DALY which is the key metric used to state the health of a population, and it is used to make comparisons among population of different countries, as well as begin used to provide a comprehensive assessment of the impact of disease and injury on a population, and help prioritize public health interventions and evaluate the effectiveness of public health programs.\n\nLet's now have a look at how **infectious diseases** can affect the DALYs. The COVID-19 pandemic has had a significant impact on DALYs metrics worldwide.\n\nStill results are not fully available, but several of the risk factors and non-communicable diseases (NCDs) highlighted by the GBD study, including obesity, diabetes, and cardiovascular disease, are associated with increased risk of serious illness and death from COVID-19, and so, as a consequence linked with an increase of the overall level of DALYs. See [The Lancet: Latest global disease estimates reveal perfect storm of rising chronic diseases and public health failures fuelling COVID-19 pandemic](https://www.healthdata.org/news-release/lancet-latest-global-disease-estimates-reveal-perfect-storm-rising-chronic-diseases-and)\n\nCOVID-19 is expected to show clearly that it has been the leading cause of global DALYs in 2020.\n\nMore information on the level of findings are in this interesting article: <https://doi.org/10.1016/S0140-6736(20)30925-9> on the Lancet by the **GBD collaborator team**.\n\n### Global impact of selected infectious disease on DALYs\n\nLooking at the Global impact of some infectious diseases, such as: Ebola.\n\nThe impact of Ebola on DALYs in 2019 can be assessed by comparing the number of DALYs due to Ebola in 2019 to the DALYs caused by other diseases or conditions during the same period.\n\nAccording to the Global Health Data Exchange (GHDx), the estimated global DALY rate for Ebola virus disease in 2019 was 0.0005, which is relatively low compared to other leading causes of DALYs, such as cardiovascular diseases, lower respiratory infections, and neonatal disorders. See [IHME Ebola — Level 3 cause](https://bit.ly/40dboLg)\n\nImport data on global burden of disease (GBD) for a given year, here I already downloaded the cvs file and save it as RData.\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Subset data to only include \ndf_dalys_2019 <- df_gbd_2019 %>%\n  filter(location_name == \"Global\",\n         sex_name == \"Both\") %>%\n  select(!contains(\"_id\"))\n\n\ndf_dalys_2019 %>% count(age_name, val)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 19 × 3\n   age_name        val     n\n   <chr>         <dbl> <int>\n 1 1-4 years    24933.     1\n 2 10-14 years   8994.     1\n 3 15-19 years  12520.     1\n 4 20-24 years  15651.     1\n 5 25-29 years  17288.     1\n 6 30-34 years  19457.     1\n 7 35-39 years  22626.     1\n 8 40-44 years  26218.     1\n 9 45-49 years  30105.     1\n10 5-9 years     9136.     1\n11 50-54 years  36694.     1\n12 55-59 years  45169.     1\n13 60-64 years  55901.     1\n14 65-69 years  67373.     1\n15 70-74 years  83145.     1\n16 75-79 years  99766.     1\n17 80-84       123203.     1\n18 85+ years   151604.     1\n19 <1 year     256548.     1\n```\n\n\n:::\n:::\n\n\nLet's have a look at the **DALYs rates** and consider the average value by 5 years range, then calculate the total DALYs for all ages in 2019.\n\n\n::: {.cell}\n\n```{.r .cell-code}\navg_dalys_2019 <- mean(df_dalys_2019$val)\navg_dalys_2019\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 58227.96\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntotal_dalys_2019 <- sum(df_dalys_2019$val)\ntotal_dalys_2019\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1106331\n```\n\n\n:::\n:::\n\n\nImport data on infectious diseases, and select Global, Ebola, both sex.\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_global_2019 <- infectious_diseases %>%\n  filter(location_name == \"Global\",\n         sex_name == \"Both\",\n         cause_name == \"Ebola\") %>%\n  select(!contains(\"_id\"))\n\n# Calculate total COVID-19 DALYs for 2019\ntotal_ebola_global_2019 <-\n  sum(ebola_global_2019$val)\n\n# Calculate the percentage change in DALYs due to COVID-19\npercent_change_dalys <- round((total_ebola_global_2019 / total_dalys_2019) *100,4)\n\n# Print the percentage change in DALYs due to COVID-19\ncat(\"Total impact of Ebola virus Globally on DALYs rates in 2019:\", percent_change_dalys, \"%\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nTotal impact of Ebola virus Globally on DALYs rates in 2019: 0.0037 %\n```\n\n\n:::\n:::\n\n\nHowever, the impact of Ebola on DALYs is more significant in certain African regions, it accounts for the whole population. For example, during the 2014-2016, the Ebola outbreak in West Africa caused an estimated 11,000 deaths and 261,000 DALYs lost.\n\nOverall, while the global impact of Ebola on DALYs in 2019 was relatively low, it is still an important health concern in areas where outbreaks occur, and efforts to prevent and control the disease are crucial to reducing its impact on affected populations.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}